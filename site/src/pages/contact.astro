---
import BaseLayout from '@layouts/BaseLayout.astro';
import Button from '@components/ui/Button.astro';
import ConsultationForm from '@components/ConsultationForm.astro';
import Modal from '@components/Modal.astro';
import { useState } from 'astro/hooks';

// This is a client-side component, so we need to use client:load or similar
// For simplicity in this example, we'll assume the modal state is managed client-side
// using a framework component if this were a mixed-content island.
// For Astro-only, we'll use a useState-like pattern, recognizing it compiles to JS.

// Mock useState for Astro component (pure Astro doesn't have hooks directly like React)
// In a real Astro project, if this were a client-side component, you'd use a framework like React or Vue
// For a purely static Astro page, you'd manage this with inline JS or a simple class toggle.
// Since the Modal component itself has inline JS to manage focus/escape,
// we'll simulate the state management for the `isOpen` prop.
// For a fully functional Astro-only solution, this would typically be a page redirect or a full-page overlay.

// For this task, we'll use a simple global variable and event listeners
// to toggle the modal, as useState is for framework components.
// The Modal component itself handles its internal accessibility (focus trap, escape).
---

<BaseLayout
  title="Contact Joe"
  description="Get in touch with Joe the Painter for a free consultation. Phone, email, or use our easy online form for painting and handyman services in San Diego County."
>
  <main id="main-content">
    <section class="bg-background py-16 md:py-24" aria-labelledby="contact-title">
      <div class="container mx-auto px-4 max-w-4xl text-center">
        <h1 id="contact-title" class="font-heading text-5xl md:text-6xl font-bold text-text mb-6">
          Contact Joe the Painter
        </h1>
        <p class="text-lg md:text-xl text-textMuted mb-12 leading-relaxed">
          Ready to start your project or have a question? Reach out today for a free consultation. We're here to help!
        </p>
      </div>
    </section>

    <section class="bg-surface py-16 md:py-24" aria-labelledby="contact-info-heading">
      <div class="container mx-auto px-4 max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-12">
        <div class="text-center md:text-left">
          <h2 id="contact-info-heading" class="font-heading text-3xl md:text-4xl font-bold text-text mb-6">
            Get in Touch Directly
          </h2>
          <p class="text-lg text-textMuted mb-8 leading-relaxed">
            Prefer to speak with Joe directly or send an email? We're always happy to hear from you.
          </p>
          <div class="space-y-6">
            <div class="flex items-center justify-center md:justify-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary mr-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              <div>
                <p class="text-textMuted text-sm">Call Joe:</p>
                <a href="tel:+17605808173" class="text-2xl font-bold text-primary hover:underline transition-all-colors-transform" aria-label="Call Joe at (760) 580-8173">
                  (760) 580-8173
                </a>
              </div>
            </div>
            <div class="flex items-center justify-center md:justify-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-primary mr-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-16 0V6a2 2 0 012-2h10a2 2 0 012 2v2m-16 0l7.89 5.26a2 2 0 002.22 0L21 8m-16 0V6a2 2 0 012-2h10a2 2 0 012 2v2" />
              </svg>
              <div>
                <p class="text-textMuted text-sm">Email Joe:</p>
                <a href="mailto:joe@joethepainter.com" class="text-2xl font-bold text-primary hover:underline transition-all-colors-transform" aria-label="Email Joe at joe@joethepainter.com">
                  joe@joethepainter.com
                </a>
              </div>
            </div>
          </div>
        </div>

        <div class="bg-background rounded-lg shadow-lg p-6 md:p-8">
          <ConsultationForm formId="consultation-contact-page" onSuccess="/thank-you" client:load />
        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<script is:inline>
  // This script simulates the modal logic for Astro-only components.
  // In a real application, you might use a framework component for client-side interactivity.
  // For this task, we assume direct navigation to the contact page for the form.
  // If a modal was triggered from other pages, the Modal.astro component's script would handle it.
</script>
---