---
/**
 * Handy Services Page
 * URL: /services/handy
 */

import { getEntry } from 'astro:content';
import BaseLayout from '@layouts/BaseLayout.astro';
import Hero from '@components/sections/Hero.astro';
import Section from '@components/sections/Section.astro';
import Button from '@components/ui/Button.astro';
import BenefitCard from '@components/ui/BenefitCard.astro';
import ProcessSteps from '@components/sections/ProcessSteps.astro';
import Accordion from '@components/ui/Accordion.astro';

const handyServicesEntry = await getEntry('service', 'handy-services');

if (!handyServicesEntry) {
  // Handle case where content entry is not found
  return Astro.redirect('/404');
}

const { data } = handyServicesEntry;

const pageMeta = {
  title: data.seo.title,
  description: data.seo.description,
  ogImage: data.featuredImage?.src || '/images/social-share-default.jpg',
};

// Extract a relevant snippet from longDescription for benefit cards
const benefitCardDescriptionSnippet = "Joe brings the same level of integrity, attention to detail, and craftsmanship to every repair and maintenance task.";
---

<BaseLayout {...pageMeta}>
  <Hero
    headline={data.title}
    subheadline={data.shortDescription}
    ctaText={data.ctaText}
    ctaHref="/consultation"
    image={data.featuredImage}
    licenseNumber="802167"
  />

  <Section id="overview" background="background">
    <div class="max-w-4xl mx-auto text-center">
      <h2 class="font-heading text-4xl md:text-5xl font-bold text-text-dark mb-8">
        Comprehensive Handy Solutions for Your Property
      </h2>
      <p class="text-text-muted text-lg leading-relaxed md:leading-relaxed">
        {data.longDescription}
      </p>
    </div>
  </Section>

  <Section id="benefits" background="surface">
    <h2 class="font-heading text-4xl md:text-5xl font-bold text-text-dark text-center mb-12">
      Why Choose Joe for Your Handy Services
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto">
      {data.benefits.map(benefit => (
        <BenefitCard
          title={benefit}
          description={benefitCardDescriptionSnippet}
          icon="wrench"
        />
      ))}
    </div>
  </Section>

  <Section id="services-list" background="background">
    <h2 class="font-heading text-4xl md:text-5xl font-bold text-text-dark text-center mb-12">
      Our Range of Reliable Handy Services
    </h2>
    <div class="max-w-3xl mx-auto">
      <ul class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 text-text-dark text-lg list-disc list-inside">
        {data.serviceTypes.map(serviceType => (
          <li>{serviceType}</li>
        ))}
      </ul>
      <p class="mt-8 text-center text-text-muted text-base">
        Don't see your specific need listed? Joe is versatile! <a href="/contact" class="text-primary hover:underline">Contact us</a> to discuss your project.
      </p>
    </div>
  </Section>

  {data.processSteps && data.processSteps.length > 0 && (
    <ProcessSteps
      heading="Our Handy Services Process: Clear, Concise, Complete"
      steps={data.processSteps}
    />
  )}

  {data.faqs && data.faqs.length > 0 && (
    <Section id="faqs" background="background">
      <h2 class="font-heading text-4xl md:text-5xl font-bold text-text-dark text-center mb-12">
        Frequently Asked Questions About Handy Services
      </h2>
      <div class="max-w-4xl mx-auto">
        <Accordion items={data.faqs.map(faq => ({ question: faq.question, answer: String(faq.answer) }))} />
      </div>
    </Section>
  )}

  <Section id="cta-bottom" background="primary-dark">
    <div class="text-center text-white max-w-3xl mx-auto">
      <h2 class="font-heading text-4xl md:text-5xl font-bold mb-6">
        Ready to Tackle Your To-Do List?
      </h2>
      <p class="text-lg md:text-xl mb-8 leading-relaxed">
        From minor repairs to essential maintenance, Joe provides reliable, high-quality handyman services with a personal touch.
      </p>
      <Button variant="accent" size="lg" href="/consultation">
        {data.ctaText}
      </Button>
    </div>
  </Section>
</BaseLayout>