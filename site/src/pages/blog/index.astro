---
import { getCollection } from 'astro:content';
import BaseLayout from '@/layouts/BaseLayout.astro';
import BlogPostCard from '@/components/BlogPostCard.astro';
import CtaBlock from '@/components/sections/CtaBlock.astro';

// Get all non-draft posts, sorted by date
const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const pageSeo = {
  title: "Joe the Painter Blog | Painting Tips & Home Maintenance Insights",
  description: "Explore Joe the Painter's blog for expert tips on interior and exterior painting, handyman advice, color selection guides, and home maintenance insights for San Diego homeowners.",
  keywords: ["painting blog", "home maintenance tips", "san diego painter advice", "diy painting", "contractor insights"],
  ogImage: "/images/social-share-blog.jpg" // Placeholder for blog index OG
};
---

<BaseLayout seo={pageSeo}>
  <section class="container mx-auto px-4 py-16 md:py-24">
    <h1 class="text-center text-4xl md:text-5xl font-heading font-bold text-text-dark mb-12">
      Joe's Insights: Blog & Resources
    </h1>
    <p class="text-center text-lg md:text-xl text-text-muted max-w-3xl mx-auto mb-16">
      Stay informed with expert tips, advice, and inspiration from Joe the Painter. From choosing the perfect paint color to essential home maintenance, we share our decades of knowledge with you.
    </p>

    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
      {posts.map((post) => (
        <BlogPostCard post={post} />
      ))}
    </div>
  </section>

  <CtaBlock />
</BaseLayout>