---
/**
 * Button.astro
 *
 * A reusable button component with variants for primary, secondary, outline, and ghost styles,
 * and different sizes. Ensures accessibility with keyboard navigation and focus states.
 */

// Type imports
import type { HTMLAttributes } from 'astro/types';

// Props interface with JSDoc comments
interface Props extends HTMLAttributes<'button'> {
  /** Visual variant of the button. */
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';
  /** Size preset of the button. */
  size?: 'sm' | 'md' | 'lg';
  /** The type attribute for the button (e.g., 'submit', 'button', 'reset'). */
  type?: 'submit' | 'button' | 'reset';
  /** Whether the button is disabled. */
  disabled?: boolean;
  /** Custom Tailwind classes to apply to the button. */
  class?: string;
}

// Destructure with defaults
const {
  variant = 'primary',
  size = 'md',
  type = 'button',
  disabled = false,
  class: className,
  ...attrs
} = Astro.props;

// Define base classes for all buttons
const baseClasses =
  'inline-flex items-center justify-center font-body font-semibold text-center text-decoration-none cursor-pointer border-px border-transparent transition-all duration-150 ease-in-out rounded-md';

// Define variant-specific classes
const variantClasses = {
  primary: disabled
    ? 'bg-neutral-300 text-white border-neutral-300 cursor-not-allowed'
    : 'bg-primary text-white border-primary hover:bg-primary-dark hover:border-primary-dark shadow-sm active:scale-[0.98]',
  secondary: disabled
    ? 'bg-neutral-300 text-white border-neutral-300 cursor-not-allowed'
    : 'bg-neutral-500 text-white border-neutral-500 hover:bg-neutral-600 hover:border-neutral-600 shadow-sm active:scale-[0.98]',
  outline: disabled
    ? 'bg-transparent text-neutral-300 border-neutral-300 cursor-not-allowed'
    : 'bg-transparent text-primary border-primary hover:bg-primary hover:text-white hover:shadow-sm active:bg-primary-dark active:border-primary-dark active:scale-[0.98]',
  ghost: disabled
    ? 'bg-transparent text-neutral-300 cursor-not-allowed'
    : 'bg-transparent text-primary hover:bg-primary/[0.05] active:bg-primary/[0.1] active:scale-[0.98]',
};

// Define size-specific classes
const sizeClasses = {
  sm: 'py-2 px-3 text-sm', // Equivalent to spacing-2 spacing-3
  md: 'py-3 px-4 text-base', // Equivalent to spacing-3 spacing-4
  lg: 'py-4 px-6 text-lg', // Equivalent to spacing-4 spacing-6
};

const focusClasses = 'focus:outline-none focus-visible:ring-2 focus-visible:ring-primary/[0.5] focus-visible:ring-offset-2';
---

<button
  type={type}
  disabled={disabled}
  class:list={[
    baseClasses,
    variantClasses[variant],
    sizeClasses[size],
    focusClasses,
    className,
  ]}
  {...attrs}
>
  <slot />
</button>

<style>
  /*
    The base styles, variants, and sizes are primarily handled by Tailwind classes within the component.
    This <style> block is intentionally minimal, adhering to a utility-first approach.
    Transitions are also handled by Tailwind's `transition-all` and `duration-150`.
  */
</style>