---
interface Props {
  href?: string;
  type?: 'button' | 'submit' | 'reset';
  variant?: 'primary' | 'secondary' | 'outline' | 'ghost' | 'accent';
  size?: 'sm' | 'md' | 'lg';
  disabled?: boolean;
  'aria-label'?: string;
  'aria-expanded'?: boolean;
  'aria-haspopup'?: boolean;
}

const {
  href,
  type = 'button',
  variant = 'primary',
  size = 'md',
  disabled = false,
  'aria-label': ariaLabel,
  'aria-expanded': ariaExpanded,
  'aria-haspopup': ariaHasPopup,
  ...rest
} = Astro.props;

const baseClasses = "inline-flex items-center justify-center font-semibold text-center text-decoration-none cursor-pointer border transition-all duration-150 ease-in-out rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-light focus-visible:ring-offset-2";

const variantClasses = {
  primary: "bg-primary text-white border-primary hover:bg-primary-dark hover:border-primary-dark active:bg-primary-dark active:border-primary-dark active:translate-y-px shadow-sm hover:shadow-md",
  secondary: "bg-neutral-500 text-white border-neutral-500 hover:bg-neutral-600 hover:border-neutral-600 active:bg-neutral-700 active:border-neutral-700 active:translate-y-px shadow-sm hover:shadow-md",
  outline: "bg-transparent text-primary border-primary hover:bg-primary hover:text-white active:bg-primary-dark active:border-primary-dark active:text-white active:translate-y-px shadow-sm hover:shadow-md",
  ghost: "bg-transparent text-primary border-transparent hover:bg-primary/5 active:bg-primary/10 active:translate-y-px",
  accent: "bg-accent text-neutral-800 border-accent hover:bg-accent-dark hover:border-accent-dark active:bg-accent-dark active:border-accent-dark active:translate-y-px shadow-sm hover:shadow-md",
};

const sizeClasses = {
  sm: "py-2 px-3 text-sm",
  md: "py-3 px-4 text-base",
  lg: "py-4 px-6 text-lg",
};

const disabledClasses = "bg-neutral-200 text-neutral-400 border-neutral-200 cursor-not-allowed shadow-none hover:shadow-none";

const classes = `${baseClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${disabled ? disabledClasses : ''}`;

// Determine whether to render an <a> or <button>
const Element = href ? 'a' : 'button';
---

<Element
  {...href ? { href } : { type }}
  class={classes}
  {...disabled && { disabled: true }}
  aria-label={ariaLabel}
  aria-expanded={ariaExpanded}
  aria-haspopup={ariaHasPopup}
  {...rest}
>
  <slot />
</Element>