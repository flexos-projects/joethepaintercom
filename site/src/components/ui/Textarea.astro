---
/**
 * Textarea
 * A reusable component for multi-line text input fields.
 */

import type { HTMLAttributes } from 'astro/types';
import Label from './Label.astro';

interface Props extends HTMLAttributes<'textarea'> {
  /** The label text for the textarea. */
  label: string;
  /** The ID of the textarea, used for associating with the label. */
  id: string;
  /** Optional placeholder text. */
  placeholder?: string;
  /** Number of rows for the textarea. */
  rows?: number;
  /** Whether the textarea is required. */
  required?: boolean;
  /** Current value of the textarea. */
  value?: string;
  /** Optional error message to display below the textarea. */
  errorMessage?: string;
}

const {
  label,
  id,
  placeholder,
  rows = 4,
  required = false,
  value,
  errorMessage,
  class: className,
  ...attrs
} = Astro.props;
---

<div class="mb-4">
  <Label for={id}>
    {label}
    {required && <span class="text-error ml-1">*</span>}
  </Label>
  <textarea
    id={id}
    name={id}
    placeholder={placeholder}
    rows={rows}
    required={required}
    aria-invalid={!!errorMessage}
    aria-describedby={errorMessage ? `${id}-error` : undefined}
    class:list={[
      'w-full',
      'px-3',
      'py-2',
      'border',
      'border-border',
      'rounded-md',
      'font-body',
      'text-base',
      'text-text',
      'bg-surface',
      'focus:outline-none',
      'focus:ring-2',
      'focus:ring-primary',
      'focus:border-transparent',
      'transition-all',
      'duration-150',
      'ease-in-out',
      errorMessage && 'border-error',
      className,
    ]}
    {...attrs}
  >{value}</textarea>
  {errorMessage && (
    <p id={`${id}-error`} class="text-error text-sm mt-1" role="alert">
      {errorMessage}
    </p>
  )}
</div>