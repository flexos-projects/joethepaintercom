---
/**
 * Input
 * A reusable component for various text-based form inputs.
 */

import type { HTMLAttributes } from 'astro/types';
import Label from './Label.astro';

interface Props extends HTMLAttributes<'input'> {
  /** The type of the input (e.g., 'text', 'email', 'tel', 'password', 'number', 'url'). */
  type?: 'text' | 'email' | 'tel' | 'password' | 'number' | 'url';
  /** The label text for the input. */
  label: string;
  /** The ID of the input, used for associating with the label. */
  id: string;
  /** Optional placeholder text. */
  placeholder?: string;
  /** Whether the input is required. */
  required?: boolean;
  /** Current value of the input. */
  value?: string;
  /** Optional error message to display below the input. */
  errorMessage?: string;
}

const {
  type = 'text',
  label,
  id,
  placeholder,
  required = false,
  value,
  errorMessage,
  class: className,
  ...attrs
} = Astro.props;
---

<div class="mb-4">
  <Label for={id}>
    {label}
    {required && <span class="text-error ml-1">*</span>}
  </Label>
  <input
    type={type}
    id={id}
    name={id}
    placeholder={placeholder}
    required={required}
    value={value}
    aria-invalid={!!errorMessage}
    aria-describedby={errorMessage ? `${id}-error` : undefined}
    class:list={[
      'w-full',
      'px-3',
      'py-2',
      'border',
      'border-border',
      'rounded-md',
      'font-body',
      'text-base',
      'text-text',
      'bg-surface',
      'focus:outline-none',
      'focus:ring-2',
      'focus:ring-primary',
      'focus:border-transparent',
      'transition-all',
      'duration-150',
      'ease-in-out',
      errorMessage && 'border-error',
      className,
    ]}
    {...attrs}
  />
  {errorMessage && (
    <p id={`${id}-error`} class="text-error text-sm mt-1" role="alert">
      {errorMessage}
    </p>
  )}
</div>