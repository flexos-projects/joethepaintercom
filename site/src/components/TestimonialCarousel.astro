---
import TestimonialCard from './TestimonialCard.astro';

const testimonials = [
  {
    quote: "Joe did an incredible job painting our home's exterior. His attention to detail and prep work were outstanding. It looks brand new!",
    clientName: 'Sarah L.',
    clientLocation: 'Homeowner, Encinitas',
    projectType: 'Exterior Painting',
  },
  {
    quote: "We've hired Joe for multiple handy projects around our office. Always reliable, professional, and gets the job done right. Highly recommend!",
    clientName: 'Mark D.',
    clientLocation: 'Small Business Owner, Carlsbad',
    projectType: 'Handy Services',
  },
  {
    quote: "Our kitchen cabinets were completely transformed! Joe's refinishing work is meticulous, and the finish is absolutely perfect. So happy with the results.",
    clientName: 'Jessica R.',
    clientLocation: 'Homeowner, San Marcos',
    projectType: 'Cabinet Refinishing',
  },
  {
    quote: "Joe painted our entire interior and fixed several drywall issues. It was a seamless process, and he was a pleasure to work with. True craftsman!",
    clientName: 'David P.',
    clientLocation: 'Homeowner, Vista',
    projectType: 'Interior Painting & Drywall Repair',
  },
  {
    quote: "Prompt, professional, and the quality of work is unmatched. Joe is our go-to for any painting or repair needs. He truly cares about his clients.",
    clientName: 'Emily S.',
    clientLocation: 'Repeat Client, Oceanside',
    projectType: 'Various Projects',
  },
];

// Shuffle testimonials to get a random order for the carousel
const shuffledTestimonials = testimonials.sort(() => 0.5 - Math.random());
const carouselItems = shuffledTestimonials.slice(0, 3); // Display 3 testimonials
---

<section class="bg-background py-16 md:py-24" aria-labelledby="testimonials-heading" role="region">
  <div class="container mx-auto px-4 max-w-5xl text-center">
    <h2 id="testimonials-heading" class="font-heading text-4xl md:text-5xl font-bold text-text mb-6">
      What Our Clients Say
    </h2>
    <p class="text-lg text-textMuted mb-12 leading-relaxed max-w-3xl mx-auto">
      Our reputation is built on trust, quality, and satisfied customers. Hear directly from those who have experienced the Joe the Painter difference.
    </p>

    <div class="relative">
      <!-- Carousel Container -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" role="feed" aria-live="polite">
        {carouselItems.map((testimonial, index) => (
          <div role="article" aria-label={`Testimonial ${index + 1} of ${carouselItems.length}`}>
            <TestimonialCard {...testimonial} />
          </div>
        ))}
      </div>

      <!-- Placeholder for actual carousel navigation if implemented with JS -->
      <!-- For a static display, buttons are not needed, but included for future JS interaction -->
      <div class="absolute inset-y-0 left-0 flex items-center -ml-6 hidden md:flex">
        <button
          class="p-2 bg-surface rounded-full shadow-md text-text hover:bg-primary hover:text-surface transition-all-colors-transform"
          aria-label="Previous testimonial"
          disabled
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
        </button>
      </div>
      <div class="absolute inset-y-0 right-0 flex items-center -mr-6 hidden md:flex">
        <button
          class="p-2 bg-surface rounded-full shadow-md text-text hover:bg-primary hover:text-surface transition-all-colors-transform"
          aria-label="Next testimonial"
          disabled
        >
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </button>
      </div>
    </div>

    <div class="mt-12">
      <Button href="/testimonials" variant="outline" size="lg">
        Read All Testimonials
      </Button>
    </div>
  </div>
</section>
---