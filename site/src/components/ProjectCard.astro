---
import { Image } from 'astro:assets';
import type { CollectionEntry } from 'astro:content';
import Button from './ui/Button.astro';

interface Props {
  project: CollectionEntry<'projects'>;
}

const { project } = Astro.props;
---

<article class="bg-surface rounded-lg shadow-md overflow-hidden flex flex-col h-full transition-all duration-300 ease-in-out hover:shadow-lg hover:-translate-y-1">
  {project.data.featuredImage && (
    <figure class="aspect-video w-full overflow-hidden">
      <Image
        src={project.data.featuredImage.src}
        alt={project.data.featuredImage.alt}
        widths={[320, 640, 960]}
        sizes="(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw"
        loading="lazy"
        decoding="async"
        class="w-full h-full object-cover transition-transform duration-300 ease-in-out group-hover:scale-105"
      />
      {project.data.featuredImage.caption && (
        <figcaption class="sr-only">{project.data.featuredImage.caption}</figcaption>
      )}
    </figure>
  )}
  <div class="p-6 flex flex-col flex-1">
    <h3 class="font-heading text-2xl font-semibold text-text-dark mb-2">
      {project.data.title}
    </h3>
    <p class="font-body text-sm text-text-muted mb-4">
      {project.data.location} &bull; {project.data.projectDate.toLocaleDateString('en-US', { year: 'numeric', month: 'short' })}
    </p>
    <p class="font-body text-base text-text-dark flex-1 mb-6 line-clamp-3">
      {project.data.shortDescription}
    </p>
    <div class="mt-auto">
      <Button href={`/our-work/${project.slug}`} variant="outline" size="sm">
        View Project Details
      </Button>
    </div>
  </div>
</article>