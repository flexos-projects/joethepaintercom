---
import { Image } from 'astro:assets';

interface ProjectCardProps {
  project: {
    slug: string;
    data: {
      title: string;
      location: string;
      shortDescription: string;
      featuredImage: {
        src: string;
        alt: string;
      };
      servicesPerformed: string[]; // e.g., ['Painting', 'Handy']
    };
  };
}

const { project } = Astro.props;
const projectLink = `/our-work/${project.slug}`;
---

<a
  href={projectLink}
  class="group block bg-surface rounded-lg shadow-md overflow-hidden
         transition-all duration-300 ease-in-out hover:shadow-lg hover:-translate-y-1
         focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2
         transform"
  data-service-types={project.data.servicesPerformed.join(',')}
>
  <div class="relative w-full h-48 overflow-hidden">
    <Image
      src={project.data.featuredImage.src}
      alt={project.data.featuredImage.alt}
      width={600}
      height={384}
      class="w-full h-full object-cover transition-transform duration-500 ease-in-out group-hover:scale-105"
      loading="lazy"
      decoding="async"
    />
  </div>
  <div class="p-4 sm:p-6 flex flex-col justify-between h-auto">
    <div>
      <h3 class="font-heading text-xl text-text-dark group-hover:text-primary transition-colors duration-200">
        {project.data.title}
      </h3>
      <p class="text-sm text-text-muted mt-1">
        {project.data.location}
      </p>
      <p class="text-base text-text-dark mt-3">
        {project.data.shortDescription}
      </p>
    </div>
    <div class="mt-4 flex flex-wrap gap-2 text-sm">
      {project.data.servicesPerformed.map(service => (
        <span class="bg-primary/10 text-primary px-3 py-1 rounded-full font-medium">
          {service}
        </span>
      ))}
    </div>
  </div>
</a>