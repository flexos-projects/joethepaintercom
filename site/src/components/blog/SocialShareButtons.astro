---
/**
 * SocialShareButtons
 * A component for sharing content on various social media platforms.
 */

// Type imports
import type { HTMLAttributes } from 'astro/types';

// Props interface with JSDoc comments
interface Props extends HTMLAttributes<'div'> {
  /** The title of the content to share */
  title: string;
  /** The URL of the content to share */
  url: string;
}

// Destructure with defaults
const {
  title,
  url,
  class: className,
  ...attrs
} = Astro.props;

const encodedTitle = encodeURIComponent(title);
const encodedUrl = encodeURIComponent(url);

const shareLinks = [
  {
    name: 'Twitter',
    icon: `
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path>
      </svg>
    `,
    href: `https://twitter.com/intent/tweet?text=${encodedTitle}&url=${encodedUrl}`
  },
  {
    name: 'Facebook',
    icon: `
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path fill-rule="evenodd" d="M19.5 2.25A2.25 2.25 0 0017.25 0h-10.5A2.25 2.25 0 004.5 2.25v19.5A2.25 2.25 0 006.75 24h10.5A2.25 2.25 0 0019.5 21.75V2.25zM12.24 16.5H10.5v-3.885c0-.687.202-1.037.605-1.037h.37c.307 0 .602.218.602.86v4.062h-1.837zm3.76-4.5h-1.815V9.75h1.815V12zM12 2.25c-5.16 0-9.75 4.59-9.75 9.75s4.59 9.75 9.75 9.75 9.75-4.59 9.75-9.75S17.16 2.25 12 2.25zM12 21.375c-4.66 0-8.438-3.778-8.438-8.438S7.34 4.5 12 4.5s8.438 3.778 8.438 8.438-3.778 8.437-8.438 8.437z" clip-rule="evenodd" />
      </svg>
    `,
    href: `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}`
  },
  {
    name: 'LinkedIn',
    icon: `
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M20.25 2.25H3.75A1.5 1.5 0 002.25 3.75v16.5A1.5 1.5 0 003.75 21.75h16.5A1.5 1.5 0 0021.75 20.25V3.75A1.5 1.5 0 0020.25 2.25zM8.25 18H5.25v-8.25h3zm-1.5-9.75a1.875 1.875 0 11-3.75 0 1.875 1.875 0 013.75 0zM18.75 18h-3v-3.75c0-.94-.06-2.14-1.31-2.14-1.31 0-1.51.99-1.51 1.96v3.93h-3v-8.25h3v1.62c.45-.88 1.63-2.14 3.06-2.14 3.27 0 3.87 2.15 3.87 4.96v5.81z" />
      </svg>
    `,
    href: `https://www.linkedin.com/shareArticle?mini=true&url=${encodedUrl}&title=${encodedTitle}`
  },
  {
    name: 'Email',
    icon: `
      <svg fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
        <path fill-rule="evenodd" d="M1.5 4.5a3 3 0 013-3h15a3 3 0 013 3v13.5a3 3 0 01-3 3H4.5a3 3 0 01-3-3V4.5zm0 9.14l8.36 4.98a3 3 0 003.28 0l8.36-4.98V4.5H1.5v9.14z" clip-rule="evenodd" />
      </svg>
    `,
    href: `mailto:?subject=${encodedTitle}&body=${encodedUrl}`
  }
];
---

<div class:list={[
  'flex flex-wrap gap-4 justify-center sm:justify-start',
  className
]} {...attrs}>
  <span class="sr-only">Share this article:</span>
  {shareLinks.map((link) => (
    <a
      href={link.href}
      target="_blank"
      rel="noopener noreferrer"
      class="flex items-center justify-center w-10 h-10 rounded-full bg-neutral-100 text-neutral-600 hover:bg-primary hover:text-white
             transition-all duration-200 ease-in-out shadow-sm
             focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 focus-visible:ring-offset-background"
      aria-label={`Share on ${link.name}`}
      title={`Share on ${link.name}`}
    >
      <Fragment set:html={link.icon} />
    </a>
  ))}
</div>

<style>
  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    a {
      transition: none;
    }
  }
</style>