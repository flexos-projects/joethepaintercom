---
/**
 * BlogSearch
 * A search input component for filtering blog posts by keyword.
 */

// Type imports
import type { HTMLAttributes } from 'astro/types';

// Props interface with JSDoc comments
interface Props extends HTMLAttributes<'input'> {
  /** The current search query string */
  query?: string;
  /** Placeholder text for the input */
  placeholder?: string;
}

// Destructure with defaults
const {
  query = '',
  placeholder = 'Search blog posts...',
  class: className,
  ...attrs
} = Astro.props;
---

<div class:list={[
  'relative flex items-center w-full',
  className
]} {...attrs}>
  <label for="blog-search" class="sr-only">Search blog posts</label>
  <input
    type="search"
    id="blog-search"
    name="q"
    value={query}
    placeholder={placeholder}
    aria-label="Search blog posts"
    class="w-full pl-4 pr-10 py-2 border border-neutral-200 rounded-md bg-white text-neutral-800 font-body text-base
           focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
           transition-all duration-200 ease-in-out shadow-sm"
  />
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    fill="currentColor"
    class="absolute right-3 h-5 w-5 text-neutral-500 pointer-events-none"
    aria-hidden="true"
  >
    <path
      fill-rule="evenodd"
      d="M10.5 3.75a6.75 6.75 0 100 13.5 6.75 6.75 0 000-13.5zM2.25 10.5a8.25 8.25 0 1114.59 5.28l4.607 4.607a1.5 1.5 0 01-2.121 2.121l-4.607-4.607A8.25 8.25 0 012.25 10.5z"
      clip-rule="evenodd"
    />
  </svg>
</div>

<style>
  /* Base styles are applied via Tailwind classes in the template.
     This section is for any custom styles not covered by Tailwind. */
  input[type="search"]::-webkit-search-decoration,
  input[type="search"]::-webkit-search-cancel-button,
  input[type="search"]::-webkit-search-results-button,
  input[type="search"]::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  /* Focus-visible for better accessibility */
  input:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.2); /* primary-blue with opacity */
  }
</style>