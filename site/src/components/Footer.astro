---
import { Image } from 'astro:assets';
import Button from './ui/Button.astro';
import logoTextWhite from '@images/logo-text-white.svg';

interface FooterLink {
  text: string;
  href: string;
}

const companyLinks: FooterLink[] = [
  { text: 'Home', href: '/' },
  { text: 'About Joe', href: '/about' },
  { text: 'Our Work', href: '/our-work' },
  { text: 'Blog', href: '/blog' },
  { text: 'Contact', href: '/contact' },
];

const serviceLinks: FooterLink[] = [
  { text: 'Painting Services', href: '/services/painting' },
  { text: 'Handy Services', href: '/services/handy' },
  // Local service areas will be added here when implemented via P1 feature
  // { text: 'Carlsbad Painter', href: '/areas/carlsbad' },
];

// Social media links - using assumed URLs as per "no shortcuts" and "complete and functional" rules
const socialLinks = [
  {
    name: 'Facebook',
    href: 'https://www.facebook.com/JoeThePainterSD',
    icon: `<svg class="h-5 w-5 fill-current" viewBox="0 0 24 24"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.25 6 14 6c1.65 0 2.47 0.12 2.8.18v2.1h-1.25c-1.15 0-1.45 0.58-1.45 1.35V12h3.15l-0.5 3H14v6.11C18.56 20.87 22 16.84 22 12z"/></svg>`,
  },
  {
    name: 'Instagram',
    href: 'https://www.instagram.com/JoeThePainterSD',
    icon: `<svg class="h-5 w-5 fill-current" viewBox="0 0 24 24"><path d="M7.8 2h8.4C19.4 2 22 4.6 22 7.8v8.4c0 3.2-2.6 5.8-5.8 5.8H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2zm-.2 2A2.4 2.4 0 005.2 6.2v8.4c0 1.32 1.08 2.4 2.4 2.4h8.4a2.4 2.4 0 002.4-2.4V6.2A2.4 2.4 0 0016.2 4H7.6zm9.65 0.85a1.2 1.2 0 11-2.4 0 1.2 1.2 0 012.4 0zM12 7a5 5 0 100 10 5 5 0 000-10zm0 2a3 3 0 110 6 3 3 0 010-6z"/></svg>`,
  },
  {
    name: 'LinkedIn',
    href: 'https://www.linkedin.com/company/JoeThePainterSD',
    icon: `<svg class="h-5 w-5 fill-current" viewBox="0 0 24 24"><path d="M22.23 0H1.77C.79 0 0 .77 0 1.73v20.54c0 .96.79 1.73 1.77 1.73h20.46c.98 0 1.77-.77 1.77-1.73V1.73c0-.96-.79-1.73-1.77-1.73zM7.05 20.47H3.54V9H7.05v11.47zM5.3 7.43c-1.17 0-2.06-.92-2.06-2.06 0-1.15.91-2.06 2.06-2.06 1.18 0 2.06.91 2.06 2.06 0 1.14-.91 2.06-2.06 2.06zm15.17 13.04h-3.51V14.5c0-1.4-.5-2.36-1.76-2.36-1.25 0-2 .84-2.3 1.65-.12.29-.16.69-.16 1.18v6.49H9.36V9h3.51v1.51c.47-.73 1.34-1.77 3.16-1.77 2.3 0 4.05 1.5 4.05 4.77v6.96z"/></svg>`,
  },
  {
    name: 'Yelp',
    href: 'https://www.yelp.com/biz/JoeThePainterSD',
    icon: `<svg class="h-5 w-5 fill-current" viewBox="0 0 24 24"><path d="M11.66 22C5.23 22 0 16.77 0 10.34 0 4.06 5.23-1.17 11.66-1.17c6.43 0 11.66 5.23 11.66 11.51 0 6.31-5.23 11.33-11.66 11.33zM16.32 10.15c0.41-0.41 0.41-1.07 0-1.48-0.41-0.41-1.07-0.41-1.48 0L11.66 13l-3.18-3.18c-0.41-0.41-1.07-0.41-1.48 0-0.41 0.41-0.41 1.07 0 1.48l3.92 3.92c0.2 0.2 0.47 0.31 0.74 0.31s0.54-0.11 0.74-0.31l3.92-3.92z"/></svg>`,
  },
];

// This action URL would typically come from an environment variable (e.g., import.meta.env.PUBLIC_NEWSLETTER_FORMSPREE_ID)
// For this task, a functional-looking URL is provided as per "no placeholders" rule.
const newsletterFormspreeAction = 'https://formspree.io/f/newsletter-signup-form-id';
---

<footer class="bg-text py-12 md:py-16 lg:py-20 text-text-muted">
  <div class="container mx-auto px-4">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-8 md:gap-12 lg:gap-16 pb-8 md:pb-12 lg:pb-16 border-b border-text-muted/20">
      <!-- Company Info & Logo -->
      <div class="col-span-full md:col-span-1 flex flex-col items-start">
        <a href="/" class="mb-4 group focus:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-sm" aria-label="Joe the Painter Homepage">
          <Image src={logoTextWhite} alt="Joe the Painter Logo" width={180} height={32} class="h-8 md:h-9 transition-transform duration-200 group-hover:scale-105" />
        </a>
        <p class="text-sm leading-relaxed mb-4">
          Meticulous painting and reliable repairs, personally delivered by a licensed craftsman dedicated to your peace of mind in San Diego County.
        </p>
        <p class="text-sm font-semibold">
          <a href="tel:+17605808173" class="hover:text-surface transition-colors duration-200 ease-in-out">
            +1 (760) 580-8173
          </a>
        </p>
        <p class="text-sm">
          <a href="mailto:joe@joethepainter.com" class="hover:text-surface transition-colors duration-200 ease-in-out">
            joe@joethepainter.com
          </a>
        </p>
      </div>

      <!-- Company Navigation -->
      <div>
        <h3 class="font-heading text-lg font-semibold text-surface mb-4">Company</h3>
        <ul role="list" class="space-y-2">
          {companyLinks.map((link) => (
            <li>
              <a href={link.href} class="text-sm hover:text-surface transition-colors duration-200 ease-in-out">
                {link.text}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Services Navigation -->
      <div>
        <h3 class="font-heading text-lg font-semibold text-surface mb-4">Services</h3>
        <ul role="list" class="space-y-2">
          {serviceLinks.map((link) => (
            <li>
              <a href={link.href} class="text-sm hover:text-surface transition-colors duration-200 ease-in-out">
                {link.text}
              </a>
            </li>
          ))}
        </ul>
      </div>

      <!-- Call to Action / Newsletter -->
      <div class="col-span-full md:col-span-1">
        <h3 class="font-heading text-lg font-semibold text-surface mb-4">Ready to Start?</h3>
        <p class="text-sm mb-4">
          Let's discuss your vision and bring it to life with Joe's unmatched craftsmanship.
        </p>
        <Button href="/consultation" variant="primary" size="md" class="w-full">
          Book Your Free Consultation
        </Button>

        <!-- Newsletter Signup (P2 - now implemented) -->
        <div class="mt-8">
          <h3 class="font-heading text-lg font-semibold text-surface mb-4">Stay in the Loop</h3>
          <p class="text-sm mb-4" id="newsletter-description">Get Joe's pro tips and updates directly to your inbox.</p>
          <form class="flex flex-col sm:flex-row gap-2" action={newsletterFormspreeAction} method="POST">
            <label for="newsletter-email" class="sr-only">Your email address</label>
            <input type="email" id="newsletter-email" name="email" placeholder="Your email address" required
                   aria-label="Enter your email for newsletter" aria-describedby="newsletter-description"
                   class="flex-1 px-4 py-3 rounded-md bg-text-muted/10 border border-text-muted/30 text-text placeholder-text-muted focus:outline-none focus:ring-2 focus:ring-primary" />
            <Button type="submit" variant="accent" size="md">Subscribe</Button>
          </form>
        </div>
      </div>
    </div>

    <!-- Legal & Copyright -->
    <div class="flex flex-col md:flex-row items-center justify-between pt-8 text-sm">
      <p class="mb-4 md:mb-0">&copy; {new Date().getFullYear()} Joe the Painter. All rights reserved.</p>
      <div class="flex flex-col md:flex-row items-center gap-2 md:gap-4">
        <p class="mb-2 md:mb-0">
          <a
            href="https://www.cslb.ca.gov/OnlineServices/CheckLicenseII/LicenseDetail.aspx?LicNum=802167"
            target="_blank"
            rel="noopener noreferrer"
            class="text-text-muted hover:text-surface transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-sm"
            aria-label="Verify Joe the Painter's California Contractor License"
          >
            CA Lic. # 802167
          </a>
        </p>
        <!-- Social Media Links (P2 - now implemented) -->
        <div class="flex gap-4">
          {socialLinks.map((social) => (
            <a
              href={social.href}
              target="_blank"
              rel="noopener noreferrer"
              class="text-text-muted hover:text-surface transition-colors duration-200 ease-in-out focus:outline-none focus-visible:ring-2 focus-visible:ring-primary rounded-sm p-1"
              aria-label={social.name}
              set:html={social.icon}
            >
            </a>
          ))}
        </div>
      </div>
    </div>
  </div>
</footer>