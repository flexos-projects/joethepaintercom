```astro
---
import type { HTMLAttributes } from 'astro/types';

interface Props extends HTMLAttributes<'div'> {
  question: string;
  id: string; // Unique ID for accordion item
  initiallyOpen?: boolean;
}

const { question, id, initiallyOpen = false, class: className, ...attrs } = Astro.props;
const panelId = `${id}-panel`;
const buttonId = `${id}-button`;
---

<div class:list={['border-b border-border py-4', className]} {...attrs}>
  <h3 class="text-lg font-semibold text-text-dark">
    <button
      id={buttonId}
      aria-expanded={initiallyOpen ? 'true' : 'false'}
      aria-controls={panelId}
      class="flex justify-between items-center w-full text-left p-2 -ml-2 rounded-md focus:outline-none focus-visible:ring-2 focus-visible:ring-primary"
      data-accordion-toggle
    >
      <span class="pr-2">{question}</span>
      <svg
        class:list={[
          'w-5 h-5 flex-shrink-0 motion-safe:transition-transform motion-reduce:transition-none duration-200',
          initiallyOpen ? 'rotate-180' : ''
        ]}
        fill="currentColor"
        viewBox="0 0 20 20"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"></path>
      </svg>
    </button>
  </h3>
  <div
    id={panelId}
    role="region"
    aria-labelledby={buttonId}
    class:list={[
      'mt-2 pl-2 text-text-muted text-base motion-safe:transition-all motion-reduce:transition-none duration-300 ease-out overflow-hidden',
      initiallyOpen ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0' // Initial state for transition
    ]}
  >
    <div class="pb-2">
      <slot />
    </div>
  </div>
</div>

<script is:inline>
  document.querySelectorAll('[data-accordion-toggle]').forEach(button => {
    const panel = document.getElementById(button.getAttribute('aria-controls'));
    const icon = button.querySelector('svg');

    if (!panel || !icon) return;

    // Set initial max-height for transition
    if (button.getAttribute('aria-expanded') === 'true') {
      panel.style.maxHeight = panel.scrollHeight + 'px';
    }

    button.addEventListener('click', () => {
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      button.setAttribute('aria-expanded', String(!isExpanded));
      icon.classList.toggle('rotate-180', !isExpanded);

      if (!isExpanded) {
        panel.style.maxHeight = panel.scrollHeight + 'px';
        panel.classList.remove('opacity-0');
        panel.classList.add('opacity-100');
      } else {
        panel.style.maxHeight = '0';
        panel.classList.remove('opacity-100');
        panel.classList.add('opacity-0');
      }
    });

    // Recalculate max-height on window resize for responsive accordions
    window.addEventListener('resize', () => {
      if (button.getAttribute('aria-expanded') === 'true') {
        panel.style.maxHeight = 'none'; // Temporarily remove to get actual height
        panel.style.maxHeight = panel.scrollHeight + 'px';
      }
    });
  });
</script>
```