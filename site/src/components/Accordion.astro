---
// Accordion.astro
// An accessible accordion component using <details> and <summary> for FAQs.

interface Props {
  question: string;
  answer: string; // RichText would be handled by markdown processing if coming from MDX
  id: string; // Unique ID for accessibility
  open?: boolean; // Controls initial open state
  class?: string; // Additional classes for the details element
}

const { question, answer, id, open = false, class: additionalClass } = Astro.props;
---

<details
  id={id}
  class:list={[
    'group bg-white rounded-lg shadow-sm border border-neutral-200 overflow-hidden',
    additionalClass
  ]}
  role="group"
  {open}
>
  <summary
    class="flex items-center justify-between p-4 cursor-pointer text-lg font-medium text-neutral-800 hover:bg-neutral-50 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 transition-colors duration-150 ease-in-out"
    aria-expanded={open ? 'true' : 'false'}
    aria-controls={`accordion-content-${id}`}
    tabindex="0"
  >
    {question}
    <span class="ml-4 flex-shrink-0">
      <svg class="h-5 w-5 text-primary transform group-open:rotate-180 transition-transform duration-200" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
      </svg>
    </span>
  </summary>
  <div
    id={`accordion-content-${id}`}
    class="px-4 pb-4 pt-2 text-neutral-600 border-t border-neutral-200 group-open:animate-accordion-open"
    role="region"
    aria-labelledby={`accordion-summary-${id}`}
  >
    <p>{answer}</p>
  </div>
</details>

<style>
  /* Optional: Custom animation for smooth open/close */
  details[open] > summary ~ * {
    animation: accordion-open 0.3s ease-out;
  }
  @keyframes accordion-open {
    0% {
      opacity: 0;
      transform: translateY(-10px);
    }
    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }
  details:not([open]) > summary ~ * {
    animation: accordion-close 0.3s ease-out;
  }
  @keyframes accordion-close {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-10px);
    }
  }
</style>